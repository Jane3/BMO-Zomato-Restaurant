{"ast":null,"code":"import _regeneratorRuntime from\"/Users/janeyou/Desktop/BMO-Zomato-Restaurant/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/janeyou/Desktop/BMO-Zomato-Restaurant/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _objectSpread from\"/Users/janeyou/Desktop/BMO-Zomato-Restaurant/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _slicedToArray from\"/Users/janeyou/Desktop/BMO-Zomato-Restaurant/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState}from'react';import axios from'axios';import'./zomato.css';import CircularProgress from'@material-ui/core/CircularProgress';export default function Zomato(){// set the initial states to store the restaurent data\nvar _useState=useState({searchRest:\"\",restData:[],isSearch:false,responseStatus:'Please enter your location to search the nearby Zomato Restaurants'}),_useState2=_slicedToArray(_useState,2),state=_useState2[0],setState=_useState2[1];var handleChangeRest=function handleChangeRest(searchQuery){return function(e){setState(_objectSpread({},state,{searchRest:e.target.value//[searchQuery]: query\n}));};};var clearSearch=function clearSearch(){setState(_objectSpread({},state,{searchRest:\"\",searchCuisine:\"\"}));};// get the City ID/Name, Longitude, and Latitude from the URL to be used to search restaurent data\nvar getLocationLatitude=function getLocationLatitude(city){return axios({method:\"GET\",url:\"https://developers.zomato.com/api/v2.1/locations?query=\".concat(city),headers:{\"user-key\":\"ff4f897b8bc0d97ccd3ed25a6b951fd3\",\"content-type\":\"application/json\"}}).then(function(response){//console.log(response)\nvar long=response.data.location_suggestions[0].longitude;var lati=response.data.location_suggestions[0].latitude;var cityId=response.data.location_suggestions[0].city_id;// console.log(long,lati)\nreturn{\"long\":long,\"lati\":lati,\"cityId\":cityId};}).catch(function(error){console.log(error);});};// search the nearby restaurents by using the city ID/Name, Longitude and Latitude retrieved from the function getLocationLatitude\nvar searchRestaurant=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(event){var query;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:query=event.target.value;console.log(query);if(!(event.key==='Enter')){_context.next=6;break;}setState(_objectSpread({},state,{searchRest:query,isSearch:true}));_context.next=6;return getLocationLatitude(query).then(function(response){console.log(response);axios({method:\"GET\",url:\"https://developers.zomato.com/api/v2.1/search?entity_id=\".concat(response.cityId,\"&entity_type=city&start=1&count=20&lat=\").concat(response.lati,\"&lon=\").concat(response.long),headers:{\"user-key\":\"ff4f897b8bc0d97ccd3ed25a6b951fd3\",\"content-type\":\"application/json\"}}).then(function(response){//console.log(response);\nvar restaurantList=[];var restaurantData={};var nearbyRest=response.data.restaurants;var _iteratorNormalCompletion=true;var _didIteratorError=false;var _iteratorError=undefined;try{for(var _iterator=nearbyRest[Symbol.iterator](),_step;!(_iteratorNormalCompletion=(_step=_iterator.next()).done);_iteratorNormalCompletion=true){var i=_step.value;restaurantData.name=i.restaurant.name;restaurantData.url=i.restaurant.url;restaurantData.average_cost_for_two=i.restaurant.average_cost_for_two;restaurantData.has_online_delivery=i.restaurant.has_online_delivery?\"Available\":\"Not Available\";restaurantData.rating=i.restaurant.user_rating.aggregate_rating;restaurantData.cuisines=i.restaurant.cuisines.split(',');restaurantData.rating_text=i.restaurant.user_rating.rating_text;restaurantData.featured_image=i.restaurant.featured_image;restaurantData.location=i.restaurant.location.address;restaurantData.timing=i.restaurant.timings.split(',');restaurantData.phone_numbers=i.restaurant.phone_numbers.split(',');restaurantList.push(restaurantData);restaurantData={};}}catch(err){_didIteratorError=true;_iteratorError=err;}finally{try{if(!_iteratorNormalCompletion&&_iterator.return!=null){_iterator.return();}}finally{if(_didIteratorError){throw _iteratorError;}}}for(var _i=0,_restaurantList=restaurantList;_i<_restaurantList.length;_i++){var i=_restaurantList[_i];if(i.cuisines.includes(\"Sandwich\")){console.log(\"looo\");}}//console.log(restaurantList);\nsetState(_objectSpread({},state,{restData:restaurantList,responseStatus:\"Here is the list of Zomato-Restaurants based on your location entered\"}));}).catch(function(error){console.log(error);});}).catch(function(Err){return setState(_objectSpread({},state,{responseStatus:\"Please Enter the correct location and try again\"}));});case 6:case\"end\":return _context.stop();}}},_callee);}));return function searchRestaurant(_x){return _ref.apply(this,arguments);};}();//contains the JSX code to show the nearby restaurents onto the website \nvar RestaurantsJSX=state.restData.map(function(rest,ind){return React.createElement(\"div\",{className:\"Card\",key:ind},React.createElement(\"div\",{className:\"content\"},React.createElement(\"div\",null,React.createElement(\"article\",null,React.createElement(\"a\",{href:rest.url,key:ind,target:\"_blank\"}),React.createElement(\"div\",{className:\"first-div\"},React.createElement(\"div\",{className:\"img\"},React.createElement(\"img\",{src:rest.featured_image,alt:\"Low Internet Connectivity\"})),React.createElement(\"div\",{className:\"img-details\"},React.createElement(\"div\",{className:\"details\"},React.createElement(\"div\",{className:\"restaurant-name\"},React.createElement(\"h3\",null,React.createElement(\"a\",{href:rest.url,key:ind,target:\"_blank\"},rest.name))),React.createElement(\"div\",{className:\"restaurnat-place\"},rest.location)),React.createElement(\"div\",{className:\"ratings\"},React.createElement(\"span\",null,\"Ratings\"),React.createElement(\"div\",{className:\"ratings\"},rest.rating)))),React.createElement(\"div\",{className:\"divider div-transparent\"}),React.createElement(\"div\",{className:\"text\"},React.createElement(\"div\",{className:\"Row\"},React.createElement(\"span\",null,React.createElement(\"b\",null,\"CUISINES:\")),React.createElement(\"span\",null,rest.cuisines.slice(0,4).join(','))),React.createElement(\"div\",{className:\"Row\"},React.createElement(\"span\",null,React.createElement(\"b\",null,\"COST FOR TWO:\")),React.createElement(\"span\",null,rest.average_cost_for_two)),React.createElement(\"div\",{className:\"Row\"},React.createElement(\"span\",null,React.createElement(\"b\",null,\"ONLINE_DELIVERY:\")),React.createElement(\"span\",null,rest.has_online_delivery)),React.createElement(\"div\",{className:\"Row\"},React.createElement(\"span\",null,React.createElement(\"b\",null,\"TIMINGS:\")),React.createElement(\"span\",null,rest.timing.slice(0,2).join(','))),React.createElement(\"div\",{className:\"Row\"},React.createElement(\"span\",null,React.createElement(\"b\",null,\"RATING TEXT:\")),React.createElement(\"span\",null,rest.rating_text)))),React.createElement(\"hr\",null),React.createElement(\"div\",{className:\"Row\"},React.createElement(\"span\",null,\"Phone Numbers:\"),React.createElement(\"span\",null,rest.phone_numbers.slice(0,2).join(','))))));});if(state.isSearch)RestaurantsJSX=React.createElement(\"div\",{className:\"progress-bar\"},React.createElement(CircularProgress,{color:\"secondary\"}));return React.createElement(\"div\",null,React.createElement(\"h1\",null,\"Zomato Restaurants\"),React.createElement(\"div\",{className:\"inputCard\"},React.createElement(\"input\",{className:\"searchbar\",type:\"text\",value:state.searchCuisine,onChange:handleChangeRest,placeholder:\"Search Cuisines\",onKeyPress:searchRestaurant}),React.createElement(\"button\",{className:\"btnSearch\",onClick:clearSearch},\"Reset\")),React.createElement(\"div\",{className:\"inputCards\"},state.responseStatus,\" \"),RestaurantsJSX);}","map":null,"metadata":{},"sourceType":"module"}